
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>Dingmaotu Blog</title>
  <meta name="author" content="Derek Li">

  
  <meta name="description" content="什么是反射？ 反射（reflection）在英语里有自我内省的意思，即是查看自己的内在。 在编程语言中，反射是指程序可以动态获得自己本身信息。我说的程序本身的信息，是指诸如一个函数的字符串名字和参数、返回值类型，一个类的名字，类的方法、字段、属性、事件等等。这些在程序设计时都是容易知道的， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://dingmaotu.github.com">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Dingmaotu Blog" type="application/atom+xml">
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Montserrat+Alternates:700' rel='stylesheet' type='text/css'>

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-27225299-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">Dingmaotu Blog</a></h1>
  
    <h2>Programming For Fun</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:dingmaotu.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
    <article>
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/11/06/csharp-reflection-tutorial/">C#反射教程</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-11-06T17:14:00+08:00" pubdate data-updated="true">Nov 6<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/11/06/csharp-reflection-tutorial/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>什么是反射？</h2>

<p>反射（reflection）在英语里有自我内省的意思，即是查看自己的内在。</p>

<p>在编程语言中，反射是指程序可以动态获得自己本身信息。我说的程序本身的信息，是指诸如一个函数的字符串名字和参数、返回值类型，一个类的名字，类的方法、字段、属性、事件等等。这些在程序设计时都是容易知道的，但是程序在编译完成并执行时，这些信息都不同程度地丢失了。例如C语言，函数的编译通常只保留一个函数的名字在最后的binary的符号表中，想要获得这个函数除了名字以外的信息是很困难的（有时候甚至可以strip掉所有的符号信息，只保留函数的入口地址，这样什么都没有了）。</p>

<p>这些信息被称为Metadata（元数据），有些人称作数据的数据。听起来有些装B，其实就是编译型语言把源码中有关程序自身的信息存储到目标文件里，而不是抛弃掉，就叫做元数据了。</p>

<p>但是实际上，反射这种东西很早就存在了。例如：</p>

<ul>
<li><p>Windows编程中，GetProcAddress可以根据一个DLL中函数的名字来获得其实际地址，从而动态调用这个函数，而不用事先就在程序中显式调用。这提供了很大的灵活性，COM的一个重要基础就是能够动态加载DLL并通过这种方式调用函数。
Linux系统动态链接库也有类似的功能（dlopen，dlsym）。</p></li>
<li><p>解释语言一般都有很强的反射能力，因为解释语言直接从源码执行，也不会丢失任何有关源码的信息。Lisp中，程序的代码和数据没有区别，因此本质上可以获得所有代码的信息，也可以动态执行任何一段在运行时构建的代码。
JavaScript的对象即是关联数组，所有的Field都可以用字符串来存取，Python有
getattr和setattr函数。</p></li>
<li><p>一般使用反射对程序效率有较大的负面影响，解释型语言在机器的计算能力还不强的时候根本得不到流行，这是很大的一个原因。但是现在计算能力空前强大，所以即使有些影响，对于一般的应用都问题不大，但是反射的灵活性和对很多问题的优雅解决（使得程序的设计更加模块化，可以动态加载可执行代码等），促使这类技术逐渐流行起来。</p></li>
</ul>


</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2012/11/06/csharp-reflection-tutorial/">Read on &rarr;</a>
    </footer>
  


    </article>
    <article>
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/11/06/tcl-the-misunderstood-chinese-version/">被误解的Tcl</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-11-06T14:45:00+08:00" pubdate data-updated="true">Nov 6<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/11/06/tcl-the-misunderstood-chinese-version/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>原文见<a href="http://oldblog.antirez.com/articoli/tclmisunderstood.html">http://oldblog.antirez.com/articoli/tclmisunderstood.html</a>，版权归原文作者所有；译文 &copy; 2012 Derek Li。本文原始翻译时间是
2012-2-12日，后来我的空间到期，不打算更新，所以转到现在的博客上。</p></blockquote>

<p>最近有一篇链接自reddit的题为<a href="http://www.cabochon.com/~stevey/blog-rants/tour-de-babel.html">Tour de Babel</a>的文章，如果你读的话就会发现这篇文章说（除了一堆其他的胡言乱语）：靠，
Python在能想象到的各方面都比Tcl好得多了，但人们还用Tcl来当作嵌入式解释器。</p>

<p>好吧，整篇文章是有点……不是那么回事。但是不幸的是，虽然很多错误观念很快被知情的读者发觉了，但是这个反对Tcl的观念却被认为是理所当然的。我希望这篇文章能说服人们，Tcl还没有那么不堪。</p>

<h2>开场白</h2>

<p>在我的编程生涯里，我使用了很多语言去写不同的应用：用C语言写了很多免费/付费的程序，用Scheme写了一个Web CMS（内容管理系统），用Tcl写了几个网络
/Web应用，用Python写了一个商店管理程序，等等。我也玩过不少其他的编程语言，例如Smalltalk，Self，FORTH，Ruby，Joy……然而，我从不怀疑，<em>没有哪门语言像Tcl一样被误解得如此之深</em>。</p>

<p>Tcl不是完美无瑕，但大多数的不足并不是在语言设计本身，而是Tcl“之父”（John Ousterhout）几年前去世了，连同他那种可以做出强势决定的专一的领导力。只要做出正确的改变，克服Tcl的大多数不足并保留其强大功能是可以的。如果你不相信Tcl异常强大，请先<em>花点时间</em>来阅读这篇文章。可能你读完之后还是不喜欢它，但希望你尊敬它，同时你将有足够强大的论据来反对这种“Tcl是玩具语言”的误解。这种误解如此小气，比“Lisp括号太多”更甚。</p>

<p>在我们开始之前，我先花点时间解释一下Tcl的工作原理。Tcl像世界上其他优秀的语言一样，拥有一些概念，这些概念组合起来，能够实现编程自由和充分的表达力。</p>

<p>在这个简短的介绍之后，你会了解在Tcl中，怎样使用普通过程（procedure）实现像Lisp一样的宏（macro）（比Ruby的Block强大得多），怎样重定义语言本身的几乎所有方面，怎样在编程时忽略类型。Tcl社区开发了数个OOP系统，大规模的语言重定义，宏系统，和很多其他有趣的东西，仅仅使用Tcl本身。如果你喜欢可编程的编程语言，我打赌，你肯定至少饶有兴趣地看一眼Tcl。</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2012/11/06/tcl-the-misunderstood-chinese-version/">Read on &rarr;</a>
    </footer>
  


    </article>
    <article>
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/10/26/how-to-modify-keyboard-layout-in-ubuntu/">How to Modify Keyboard Layouts Easily in Ubuntu</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-10-26T23:20:00+08:00" pubdate data-updated="true">Oct 26<span>th</span>, 2012</time>
        
         | <a href="/blog/2012/10/26/how-to-modify-keyboard-layout-in-ubuntu/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>If you want to remap the CAPSLOCK key to the Control key or something else,
you will find many tutorials on the internet (most of them are of course for
Emacs learners). However, quite a few of them are outdated and unnecessarily
complicated (for me). In a modern version of Ubuntu, you can accomplish this
easily in the system settings dialog. I believe Ubuntu learned this from Mac.</p>

<p>Here is how (12.04 LTS):</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2012/10/26/how-to-modify-keyboard-layout-in-ubuntu/">Read on &rarr;</a>
    </footer>
  


    </article>
    <article>
  <header>
    
      <h1 class="entry-title"><a href="/blog/2012/03/31/octopress-a-hard-way-to-blog/">Octopress: A HARD Way to Blog</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2012-03-31T19:33:00+08:00" pubdate data-updated="true">Mar 31<span>st</span>, 2012</time>
        
         | <a href="/blog/2012/03/31/octopress-a-hard-way-to-blog/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h2>From Ruby Installation to AN Octopress Blog</h2>

<p>It needs quite a lot effort to setup an octopress blog. First of all, trying to use ruby under Windows is just painful, so I use CentOS to do all these (in a VMWare Player Virtual Machine). I downloaded RVM, following the RVM homepage guides, and did not succeed for several times. That was because I omitted the &#8220;requirement&#8221; step (I thought RVM will install requirements for me). However, I did build ruby successfully and was happy, until I had found that gem, heroku were not functional. I had to install zlib, openssl etc. with RVM. But in China you cannot even access zlib homepage (similarly ruby-installer, vimeo, facebook, you name it). I then remembered the &#8220;requirements&#8221; step, and just yum-ed them all.</p>

<p>I have learned a bit Ruby, so octopress setup guide is relatively easy to understand. The setup is OK now, this blog being the first to test Octopress functionality, markdown syntax, and code rendering.</p>

</div>
  
  
    <footer>
      <a rel="full-article" href="/blog/2012/03/31/octopress-a-hard-way-to-blog/">Read on &rarr;</a>
    </footer>
  


    </article>
  <div class="pagination">
    <a href="/blog/archives">Blog Archives</a>
  </div>
</div>
<aside class="sidebar"><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2012/11/06/csharp-reflection-tutorial/">C#反射教程</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/11/06/tcl-the-misunderstood-chinese-version/">被误解的Tcl</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/10/26/how-to-modify-keyboard-layout-in-ubuntu/">How to modify keyboard layouts easily in Ubuntu</a>
      </li>
    
      <li class="post">
        <a href="/blog/2012/03/31/octopress-a-hard-way-to-blog/">Octopress: A HARD Way to Blog</a>
      </li>
    
  </ul>
</section>

<section>
  <h1>GitHub Repos</h1>
  <ul id="gh_repos">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  
  <a href="https://github.com/dingmaotu">@dingmaotu</a> on GitHub
  
  <script type="text/javascript">
    $.domReady(function(){
        if (!window.jXHR){
            var jxhr = document.createElement('script');
            jxhr.type = 'text/javascript';
            jxhr.src = '/javascripts/libs/jXHR.js';
            var s = document.getElementsByTagName('script')[0];
            s.parentNode.insertBefore(jxhr, s);
        }

        github.showRepos({
            user: 'dingmaotu',
            count: 0,
            skip_forks: true,
            target: '#gh_repos'
        });
    });
  </script>
  <script src="/javascripts/github.js" type="text/javascript"> </script>
</section>


</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2012 - Derek Li -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'dingblog';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
